<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QtRestClient: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="display: inline;">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QtRestClient
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
   <div id="projectbrief">A library for generic JSON-based REST-APIs, with a mechanism to map JSON to Qt objects</div>
  </td>
 </tr>
 </tbody>
</table>
<a style="float: right;" target="_blank"  href="https://github.com/Skycoder42/QtRestClient">
<img style="padding: 10px;" src="GitHub_Logo.png"/>
</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">QtRestClient Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#features">Features</a></li>
<li class="level1"><a href="#download-installation">Download/Installation</a><ul><li class="level2"><a href="#building-without-qtjsonserializer-qdep">Building without QtJsonSerializer/qdep</a></li>
</ul>
</li>
<li class="level1"><a href="#usage">Usage</a><ul><li class="level2"><a href="#examples">Examples</a><ul><li class="level3"><a href="#api-definition">API-Definition</a></li>
<li class="level3"><a href="#api-use">API-Use</a></li>
</ul>
</li>
<li class="level2"><a href="#multithreading">Multithreading</a><ul><li class="level3"><a href="#simple-threading">Simple threading</a></li>
<li class="level3"><a href="#threadpooling-replies">Threadpooling replies</a></li>
</ul>
</li>
<li class="level2"><a href="#api-generator">API-Generator</a><ul><li class="level3"><a href="#example-api-definition">Example API definition</a></li>
</ul>
</li>
<li class="level2"><a href="#authentication">Authentication</a><ul><li class="level3"><a href="#example-authentication">Example authentication</a></li>
</ul>
</li>
<li class="level2"><a href="#qobject-ownership">QObject Ownership</a></li>
</ul>
</li>
<li class="level1"><a href="#documentation">Documentation</a></li>
</ul>
</div>
<div class="textblock"><p>A library for generic JSON-based REST-APIs, with a mechanism to map JSON to <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> objects.</p>
<p><a href="https://github.com/Skycoder42/QtRestClient/actions?query=workflow%3A%22CI%20build%22"><img src="https://github.com/Skycoder42/QtRestClient/workflows/CI%20build/badge.svg" alt="Github Actions status" class="inline"/></a> <a href="https://www.codacy.com/app/Skycoder42/QtRestClient"><img src="https://api.codacy.com/project/badge/Grade/5a75806bda324b14bf493c1d94ad7041" alt="Codacy Badge" class="inline"/></a> <a href="https://aur.archlinux.org/packages/qt5-restclient/"><img src="https://img.shields.io/aur/version/qt5-restclient.svg" alt="AUR" class="inline"/></a></p>
<h1><a class="anchor" id="features"></a>
Features</h1>
<ul>
<li>Consume any CBOR or JSON REST-API</li>
<li>Map API objects to QObject/Q_GADGET classes. Supports:<ul>
<li>basic objects</li>
<li>lists</li>
<li>paging objects</li>
<li>anything <a href="https://github.com/Skycoder42/QtJsonSerializer">QtJsonSerializer</a> supports</li>
</ul>
</li>
<li>Allows to create API class representations to wrap specific parts of the api</li>
<li>Reply-based system - use either signal/slot or a more functional approach</li>
<li>Custom compiler to generate API objects, classes and methods from simple XML files</li>
<li>Support for multithreading and threadpools</li>
</ul>
<h1><a class="anchor" id="download-installation"></a>
Download/Installation</h1>
<p>There are multiple ways to install the <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> module, sorted by preference:</p>
<ol type="1">
<li><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qml-package.html">Package</a> Managers: The library is available via:<ul>
<li><b>Arch-Linux:</b> AUR-Repository: <a href="https://aur.archlinux.org/packages/qt5-restclient/"><code>qt5-restclient</code></a></li>
<li><b>MacOs:</b><ul>
<li>Tap: <a href="https://github.com/Skycoder42/homebrew-qt-modules"><code>brew tap Skycoder42/qt-modules</code></a></li>
<li><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qml-package.html">Package</a>: <code>qtrestclient</code></li>
<li><b>IMPORTANT:</b> Due to limitations of homebrew, you must run <code>source /usr/local/opt/qtrestclient/bashrc.sh</code> before you can use the module. Some goes for the <code>qtjsonserializer</code> dependency</li>
</ul>
</li>
</ul>
</li>
<li>Simply add my repository to your <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> MaintenanceTool (Image-based How-To here: <a href="https://github.com/Skycoder42/QtModules/blob/master/README.md#add-my-repositories-to-qt-maintenancetool">Add custom repository</a>):<ol type="a">
<li>Start the MaintenanceTool from the commandline using <code>/path/to/MaintenanceTool --addTempRepository &lt;url&gt;</code> with one of the following urls (GUI-Method is currently broken, see <a href="https://bugreports.qt.io/browse/QTIFW-1156">QTIFW-1156</a>) - This must be done <em>every time</em> you start the tool:<ul>
<li>On Linux: <a href="https://install.skycoder42.de/qtmodules/linux_x64">https://install.skycoder42.de/qtmodules/linux_x64</a></li>
<li>On Windows: <a href="https://install.skycoder42.de/qtmodules/windows_x86">https://install.skycoder42.de/qtmodules/windows_x86</a></li>
<li>On Mac: <a href="https://install.skycoder42.de/qtmodules/mac_x64">https://install.skycoder42.de/qtmodules/mac_x64</a></li>
</ul>
</li>
<li>A new entry appears under all supported <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> Versions (e.g. <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> &gt; <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> 5.11 &gt; Skycoder42 <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> modules</code>)</li>
<li>You can install either all of my modules, or select the one you need: <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> Rest Client</code></li>
<li>Continue the setup and thats it! you can now use the module for all of your installed Kits for that <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a></li>
</ol>
</li>
<li>Download the compiled modules from the release page. <b>Note:</b> You will have to add the correct ones yourself and may need to adjust some paths to fit your installation!</li>
<li>Build it yourself! <b>Note:</b> This requires perl to be installed. If you don't have/need cmake, you can ignore the related warnings. To automatically build and install to your <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> installation, run:<ul>
<li>Install and prepare <a href="https://github.com/Skycoder42/qdep#installation">qdep</a></li>
<li>Install <a href="https://github.com/Skycoder42/QtJsonSerializer#downloadinstallation">QtJsonSerializer</a></li>
<li>Download the sources. Either use <code>git clone</code> or download from the releases. If you choose the second option, you have to manually create a folder named <code>.git</code> in the projects root directory, otherwise the build will fail.</li>
<li><code>qmake</code></li>
<li><code>make</code> (If you want the tests/examples/etc. run <code>make all</code>)</li>
<li>Optional steps:<ul>
<li><code>make doxygen</code> to generate the documentation</li>
<li><code>make -j1 run-tests</code> to build and run all tests</li>
</ul>
</li>
<li><code>make install</code></li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="building-without-qtjsonserializer-qdep"></a>
Building without QtJsonSerializer/qdep</h2>
<p>If you only need the raw JSON-API, without the generic deserialization, then you can build the library without the support for those. To do so, simply run <code>qmake CONFIG+=no_json_serializer</code> instead of a parameterless qmake, and the project will be prepared without those generic APIS (it will also skip creation of qrestbuilder). This also means that the two dependencies, qdep and QtJsonSerializer, are <em>not required</em> anymore and do not have to be installed (you can ignore related warnings).</p>
<p>Also, when building the library in this configuration, do not run <code>make all</code>, as the tests will fail to build against this configuration. Simply run <code>make</code> instead. To build the examples, run <code>make sub-examples</code>.</p>
<p><b>Important:</b> Please note that you must not include <code>#include &lt;<a class="el" href="namespace_qt_rest_client.html" title="The Namespace containing all classes of the QtRestClient module.">QtRestClient</a>&gt;</code> when using the library in this configuration. Instead, include the needed headers directly, e.g. <code>#include &lt;QtRestClient/RestClient&gt;</code>.</p>
<h1><a class="anchor" id="usage"></a>
Usage</h1>
<p>The restclient is provided as a <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> module. Thus, all you have to do is add the module, and then, in your project, add <code>QT += restclient</code> to your <code>.pro</code> file!</p>
<p>The API consists of 3 main classes:</p>
<ul>
<li><b>RestClient:</b> Set up the API, i.e. how to access it, the base URL and headers</li>
<li><b>RestClass:</b> A subset of the API, allows to make requests</li>
<li><b>RestReply/GenericRestReply:</b> The reply control returned for every request, to obtain the result and react on errors</li>
</ul>
<h2><a class="anchor" id="examples"></a>
Examples</h2>
<p>The following examples show an example request made to <a href="https://jsonplaceholder.typicode.com/">JSONPlaceholder</a> in different ways.</p>
<h3><a class="anchor" id="api-definition"></a>
API-Definition</h3>
<p>Before we can start using the API, we have to define c++ objects to map the JSON to. For this example, all we need is to represent a post. This example makes use of Q_GADGET, but it works the same for QObjets as well. MEMBER properties are used for simplicity, it works with any normal property. See <a href="https://github.com/Skycoder42/QJsonSerializer">QtJsonSerializer</a> for more details about the serialization part. <b>Note:</b> This is optional. You can in fact use the API with JSON only. </p><div class="fragment"><div class="line"><span class="keyword">struct </span>Post</div>
<div class="line">{</div>
<div class="line">    Q_GADGET</div>
<div class="line"> </div>
<div class="line">    Q_PROPERTY(<span class="keywordtype">int</span> <span class="keywordtype">id</span> MEMBER <span class="keywordtype">id</span>)</div>
<div class="line">    Q_PROPERTY(<span class="keywordtype">int</span> userId MEMBER userId)</div>
<div class="line">    Q_PROPERTY(<a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a> title MEMBER title)</div>
<div class="line">    Q_PROPERTY(<a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a> body MEMBER body)</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    Post();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> id;</div>
<div class="line">    <span class="keywordtype">int</span> userId;</div>
<div class="line">    <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a> title;</div>
<div class="line">    <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a> body;</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="api-use"></a>
API-Use</h3>
<p>We will now query the data of the post with the id 42. The final URL is: <a href="https://jsonplaceholder.typicode.com/posts/42">https://jsonplaceholder.typicode.com/posts/42</a></p>
<p>First, you set up the client, for example in your main: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> client = <span class="keyword">new</span> <a class="code" href="class_qt_rest_client_1_1_rest_client.html">QtRestClient::RestClient</a>();</div>
<div class="line">client-&gt;setBaseUrl(<a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qurl.html">QUrl</a>(<span class="stringliteral">&quot;https://jsonplaceholder.typicode.com&quot;</span>));</div>
<div class="line"><a class="code" href="namespace_qt_rest_client.html#a78075e9bed69e0224778b083e74dd902">QtRestClient::addGlobalApi</a>(<span class="stringliteral">&quot;jsonplaceholder&quot;</span>, client);<span class="comment">//optional, makes it easier to use the api</span></div>
</div><!-- fragment --><p>Now, in any class you want to use the api, you can create rest classes to do so: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> restClass = <a class="code" href="namespace_qt_rest_client.html#a4945a084dd4f6353820ceb5485ddf035">QtRestClient::createApiClass</a>(<span class="stringliteral">&quot;jsonplaceholder&quot;</span>, <span class="stringliteral">&quot;posts&quot;</span>, <span class="keyword">this</span>);<span class="comment">//creates a restclass for the registered API, with the sub-path &quot;posts&quot;</span></div>
</div><!-- fragment --><p>Finally, we send the get-request and log the reply: </p><div class="fragment"><div class="line">restClass-&gt;get&lt;Post&gt;(<span class="stringliteral">&quot;42&quot;</span>)-&gt;onSucceeded([](<span class="keywordtype">int</span> statusCode, Post data) {  <span class="comment">//calls: GET https://jsonplaceholder.typicode.com/posts/42</span></div>
<div class="line">    <span class="comment">//do whatever you want with the data</span></div>
<div class="line">    qDebug() &lt;&lt; data.id</div>
<div class="line">             &lt;&lt; data.userId</div>
<div class="line">             &lt;&lt; data.title</div>
<div class="line">             &lt;&lt; data.body</div>
<div class="line">});</div>
</div><!-- fragment --><p>And thats all you need for a basic API access. Check the documentation for more and <em>important</em> details about the client, the class and the replies!</p>
<h2><a class="anchor" id="multithreading"></a>
Multithreading</h2>
<p>Generally speaking, the library primarily supports single threaded execution, as all requests and replies are handled asynchronously thanks to signals and slots. For most applications, you should keep it that way, as multithreading will only slow down your application, as long as your workload is not big enough to justify threaded mode.</p>
<p>Please note that it is easily possible to create multiple different instances of the RestClient in their own respective thread. However, if you want to use the <b>same</b> instance in multiple threads, make sure to read the following carefully.</p>
<h3><a class="anchor" id="simple-threading"></a>
Simple threading</h3>
<p>To enable basic threading support, simply set the <code><a class="el" href="class_qt_rest_client_1_1_rest_client.html#a29da130434ee296aaa7894c282d32fcb" title="Specifies, whether the client can be used in a multithreaded context.">QtRestClient::RestClient::threaded</a></code> property to true. This will make all members of the client threadsafe, as well as of any <code><a class="el" href="class_qt_rest_client_1_1_rest_class.html" title="A class to perform requests to an API.">QtRestClient::RestClass</a></code> belonging to it. From that point on, any request sent via this client will have the requests asynchronously posted to it's original thread. This means requests are still <em>sent</em> from the primary thread, but any steps before that (i.e. creation, serialization, encoding) are run on whatever thread you call the method to send.</p>
<p>The <code><a class="el" href="class_qt_rest_client_1_1_rest_reply.html" title="A class to handle replies for JSON requests.">QtRestClient::RestReply</a></code> classes handle this case transparently, you can use them the same as for normal single threaded operation. The only difference is, that their reply member may be <code>nullptr</code> for a while after sending the request. The handlers assigned to the replies (e.g. <code>onSuccess(...)</code>) will be executed on the <b>same thread</b> as the reply was created on.</p>
<p>For this all to work, <em>all</em> threads that you use any class or reply on, <em>must</em> be a <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qthread.html">QThread</a> with a running <b>eventloop</b> (<a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qthread.html#exec">QThread::exec</a>). Otherwise the replies will not be notified of the completition and never run any of the handlers.</p>
<h3><a class="anchor" id="threadpooling-replies"></a>
Threadpooling replies</h3>
<p>In addition to this general multithreading support, it is also possible to let <code><a class="el" href="class_qt_rest_client_1_1_rest_reply.html" title="A class to handle replies for JSON requests.">QtRestClient::RestReply</a></code> instances run on a <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qthreadpool.html">QThreadPool</a>. To do so, you can either call <code><a class="el" href="class_qt_rest_client_1_1_rest_reply.html#a8afa2f4ca0c69a0b956883e9542efa21" title="WRITE accessor for RestReply::async.">QtRestClient::RestReply::makeAsync</a></code> or set set <code><a class="el" href="class_qt_rest_client_1_1_rest_client.html#a9e68acc2174f9f76bfb933281527429e" title="Holds a thread pool to be used by all replies created via this clients classes.">QtRestClient::RestClient::asyncPool</a></code> property - the latter affecting all replies created for a certain client.</p>
<p>The network I/O will still be performed by the main thread, but the parsing, deserialization and proccessing via the handlers is run on an arbitrary thread of the pool. This mode should only be used in combination with the threaded mode.</p>
<p>As threadpools do not run a standard eventloop, any request sent from within a pooled handler <b>must</b> call <code>makeAsync</code> on the replies to make sure they are correctly handled. Otherwise they replies assume they are on a normal <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qthread.html">QThread</a> and will <em>never</em> complete. You can skip this step, if <code><a class="el" href="class_qt_rest_client_1_1_rest_client.html#a9e68acc2174f9f76bfb933281527429e" title="Holds a thread pool to be used by all replies created via this clients classes.">QtRestClient::RestClient::asyncPool</a></code> was set, as this internally makes any reply send from the clients classes asynchronous.</p>
<p>You can use the pooling without multithreading enabled, but in that case you <b>must not</b> send new requests from a handler. This means <code><a class="el" href="class_qt_rest_client_1_1_paging.html" title="A class to access generic paging objects.">QtRestClient::Paging</a></code> and <code><a class="el" href="namespace_qt_rest_client.html#class_qt_rest_client_1_1_simple" title="A base class to create a simply type version for a normal one. Check The QObject* or Q_GADGET version...">QtRestClient::Simple</a></code> objects cannot be used.</p>
<h2><a class="anchor" id="api-generator"></a>
API-Generator</h2>
<p>The library comes with a tool to create API data classes and wrapper classes over the rest client. Those are generated from XML files and allow an easy creation of APIs in your application. The tool is build as a custom compiler and added to qmake. To use the tool simply add the json files to you pro file, and the sources will be automatically generated and compiled into your application!</p>
<h3><a class="anchor" id="example-api-definition"></a>
Example API definition</h3>
<p>The following example shows a XML file to generate the post type from above (with shared data optimizations, automatic registration, etc.). It could be named <code>post.xml</code>: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">RestGadget</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Post&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;id&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;int&quot;</span>&gt;-1&lt;/<span class="keywordtype">Property</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;userId&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;int&quot;</span>&gt;-1&lt;/<span class="keywordtype">Property</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;title&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;QString&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;body&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;QString&quot;</span>/&gt;</div>
<div class="line">&lt;/<span class="keywordtype">RestGadget</span>&gt;</div>
</div><!-- fragment --><p>A definition for a very simple API, that allows some simple operations for posts, could look like this. It could be named <code>api.xml</code>: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">RestApi</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ExampleApi&quot;</span> <span class="keyword">globalName</span>=<span class="stringliteral">&quot;jsonplaceholder&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Include</span> <span class="keyword">local</span>=<span class="stringliteral">&quot;true&quot;</span>&gt;<span class="keyword">api_posts.h</span>&lt;/<span class="keywordtype">Include</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">BaseUrl</span>&gt;<span class="keyword">https:</span>//<span class="keyword">jsonplaceholder.typicode.com</span>&lt;/<span class="keywordtype">BaseUrl</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">Class</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;posts&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;PostClass&quot;</span>/&gt;</div>
<div class="line">&lt;/<span class="keywordtype">RestApi</span>&gt;</div>
</div><!-- fragment --><p>You can either directly add the methods to the API, or, like I did in this example, split the classes into different files. It could be named <code>api_posts.xml</code>: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">RestClass</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;PostClass&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Include</span> <span class="keyword">local</span>=<span class="stringliteral">&quot;true&quot;</span>&gt;<span class="keyword">post.h</span>&lt;/<span class="keywordtype">Include</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Path</span>&gt;<span class="keyword">posts</span>&lt;/<span class="keywordtype">Path</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">Method</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;listPosts&quot;</span> <span class="keyword">verb</span>=<span class="stringliteral">&quot;GET&quot;</span> <span class="keyword">returns</span>=&quot;<span class="keyword">QList</span>&amp;<span class="keyword">lt</span>;<span class="keyword">Post</span>&amp;<span class="keyword">gt</span>;<span class="stringliteral">&quot;/&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;Method name=&quot;</span><span class="keyword">post</span><span class="stringliteral">&quot; returns=&quot;</span><span class="keyword">Post</span><span class="stringliteral">&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">        &lt;PathParam key=&quot;</span><span class="keyword">id</span><span class="stringliteral">&quot; type=&quot;</span><span class="keyword">int</span><span class="stringliteral">&quot;/&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;/Method&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;Method name=&quot;</span><span class="keyword">savePost</span><span class="stringliteral">&quot; verb=&quot;</span><span class="keyword">POST</span><span class="stringliteral">&quot; body=&quot;</span><span class="keyword">Post</span><span class="stringliteral">&quot; returns=&quot;</span><span class="keyword">Post</span><span class="stringliteral">&quot;/&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;Method name=&quot;</span><span class="keyword">updatePost</span><span class="stringliteral">&quot; verb=&quot;</span><span class="keyword">PUT</span><span class="stringliteral">&quot; body=&quot;</span><span class="keyword">Post</span><span class="stringliteral">&quot; returns=&quot;</span><span class="keyword">Post</span><span class="stringliteral">&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">        &lt;PathParam key=&quot;</span><span class="keyword">id</span><span class="stringliteral">&quot; type=&quot;</span><span class="keyword">int</span><span class="stringliteral">&quot;/&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;/Method&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;Method name=&quot;</span><span class="keyword">deletePost</span><span class="stringliteral">&quot; verb=&quot;</span><span class="keyword">DELETE</span><span class="stringliteral">&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">        &lt;PathParam key=&quot;</span><span class="keyword">id</span><span class="stringliteral">&quot; type=&quot;</span><span class="keyword">int</span>&quot;/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">Method</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">RestClass</span>&gt;</div>
</div><!-- fragment --><p>These files are added to the <code>.pro</code> file as follows: </p><div class="fragment"><div class="line">QT += restclient</div>
<div class="line"> </div>
<div class="line">REST_API_FILES += post.xml \</div>
<div class="line">    api.xml \</div>
<div class="line">    api_posts.xml</div>
</div><!-- fragment --><p>And thats it! once you run qmake and compile your application, those APIs will be generated for you. The usage is fairly simple: </p><div class="fragment"><div class="line"><span class="comment">// by using the API directly:</span></div>
<div class="line"><span class="keyword">auto</span> api = <span class="keyword">new</span> ExampleApi(<span class="keyword">this</span>);</div>
<div class="line"><span class="keyword">auto</span> reply = api-&gt;posts()-&gt;post(42);</div>
<div class="line"><span class="comment">// continue as usual with any generic network reply</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// by using the factory to create the class only:</span></div>
<div class="line"><span class="keyword">auto</span> posts = ExampleApi::factory().posts().instance(<span class="keyword">this</span>);</div>
<div class="line"><span class="keyword">auto</span> reply = posts-&gt;post(42);</div>
</div><!-- fragment --><p>Check the JsonPlaceholderApi example in <code>examples/restclient</code> for this example.</p>
<h2><a class="anchor" id="authentication"></a>
Authentication</h2>
<p>When I was trying to implement authentication, I found that it can be quite heterogenous. Because of that, I did not implement a specific authentication mechanism. Instead, you can either use one supported by <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> or create your own auth flow. The easiest way to do so is to create a RestClient, and then perform whatever authentication you need with the clients internal <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qnetworkaccessmanager.html">QNetworkAccessManager</a>, and set parameters, headers, cookies, etc accordingly, if neccessary.</p>
<p><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> itself supports the following kinds of authentication:</p>
<ul>
<li><a href="https://doc.qt.io/qt-5/qauthenticator.html"><b>QAuthenticator:</b></a> Integrated in <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qnetworkaccessmanager.html">QNetworkAccessManager</a>, via a signal. See <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> Docs for supported mechanisms</li>
<li><a href="https://doc.qt.io/qt-5/qtnetworkauth-index.html"><b>QtNetworkAuth:</b></a> A Technology preview providing OAuth and OAuth2 authentication flows.</li>
</ul>
<p><b>Note:</b> For the latter, use the <code>restclientauth</code> module. The following examples explains how</p>
<h3><a class="anchor" id="example-authentication"></a>
Example authentication</h3>
<div class="fragment"><div class="line">QAbstractOAuth *oAuth = ...; // create an OAuth instance as needed</div>
<div class="line">// perform the usual handshake to setup the oAuth object</div>
<div class="line">oAuth-&gt;grant();</div>
<div class="line">// ...</div>
<div class="line"> </div>
<div class="line">// create a client from the oAuth</div>
<div class="line">auto client = new QtRestClient::Auth::AuthRestClient(oAuth);</div>
<div class="line">// continue as per usual</div>
</div><!-- fragment --><h2><a class="anchor" id="qobject-ownership"></a>
QObject Ownership</h2>
<p>If you are using <a class="el" href="namespace_qt_rest_client.html" title="The Namespace containing all classes of the QtRestClient module.">QtRestClient</a> with QObjects, please be aware that none of the RestClients functions take ownership of the returend objects. This means <b>you</b> are responsible for deleting them, if not needed anymore. In short, you as caller own the objects returned to your handlers. If you are uncertain whether you need to handle an object or not, check the documentation of the specific function for details.</p>
<h1><a class="anchor" id="documentation"></a>
Documentation</h1>
<p>The documentation is available on <a href="https://skycoder42.github.io/QtRestClient/">github pages</a>. It was created using <a href="http://www.doxygen.org/">doxygen</a>. The HTML-documentation and Qt-Help files are shipped together with the module for both the custom repository and the package on the release page. Please note that doxygen docs do not perfectly integrate with QtCreator/QtAssistant. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="aqurl_html"><div class="ttname"><a href="https://doc.qt.io/qt-5/qurl.html">QUrl</a></div></div>
<div class="ttc" id="anamespace_qt_rest_client_html_a78075e9bed69e0224778b083e74dd902"><div class="ttname"><a href="namespace_qt_rest_client.html#a78075e9bed69e0224778b083e74dd902">QtRestClient::addGlobalApi</a></div><div class="ttdeci">Q_RESTCLIENT_EXPORT bool addGlobalApi(const QString &amp;name, RestClient *client)</div><div class="ttdoc">Makes the given API available under the given name.</div><div class="ttdef"><b>Definition:</b> <a href="restclient_8cpp_source.html#l00436">restclient.cpp:436</a></div></div>
<div class="ttc" id="aqstring_html"><div class="ttname"><a href="https://doc.qt.io/qt-5/qstring.html">QString</a></div></div>
<div class="ttc" id="anamespace_qt_rest_client_html_a4945a084dd4f6353820ceb5485ddf035"><div class="ttname"><a href="namespace_qt_rest_client.html#a4945a084dd4f6353820ceb5485ddf035">QtRestClient::createApiClass</a></div><div class="ttdeci">Q_RESTCLIENT_EXPORT RestClass * createApiClass(const QString &amp;name, const QString &amp;path, QObject *parent=nullptr)</div><div class="ttdoc">Creates a new API class based on the client for the given API name.</div><div class="ttdef"><b>Definition:</b> <a href="restclient_8cpp_source.html#l00509">restclient.cpp:509</a></div></div>
<div class="ttc" id="aclass_qt_rest_client_1_1_rest_client_html"><div class="ttname"><a href="class_qt_rest_client_1_1_rest_client.html">QtRestClient::RestClient</a></div><div class="ttdoc">A class to define access to an API, with general settings.</div><div class="ttdef"><b>Definition:</b> <a href="restclient_8h_source.html#l00030">restclient.h:30</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 10 2019 08:05:50 for QtRestClient by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
